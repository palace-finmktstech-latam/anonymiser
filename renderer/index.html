<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Palace Anonymizer - Herramienta de Anonimizaci√≥n</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Encabezado principal con logo de Palace -->
    <header class="top-banner">
        <div class="logo-container">
            <img src="../palace.jpg" alt="Palace Logo" class="logo">
        </div>
        <div class="version-info">v1.0</div>
    </header>

    <!-- Contenedor principal de la aplicaci√≥n -->
    <div class="app-container">
        <!-- Navegaci√≥n por pesta√±as -->
        <nav class="tab-navigation">
            <button class="tab-button active" data-tab="files">
                üìÇ Seleccionar archivos
            </button>
            <button class="tab-button" data-tab="config">
                üõ† Configurar
            </button>
            <button class="tab-button" data-tab="results">
                üìÑ Resultados
            </button>
        </nav>

        <!-- Contenido de las pesta√±as -->
        <main class="tab-content">
            <!-- Pesta√±a: Seleccionar archivos -->
            <section id="files-tab" class="tab-pane active">
                <div class="tab-navigation-buttons">
                    <button class="nav-button" id="files-prev-btn" disabled>‚Üê Anterior</button>
                    <button class="nav-button" id="files-next-btn">Siguiente ‚Üí</button>
                </div>
                <div class="tab-header">
                    <h2>Seleccionar Archivos para Anonimizar</h2>
                    <p>Selecciona los archivos PDF, Excel o CSV que deseas anonimizar</p>
                </div>

                <!-- √Årea de carga de archivos separada -->
                <div class="file-upload-section">
                    <div class="upload-row">
                        <!-- Documentos PDF -->
                        <div class="upload-column">
                            <h3>Documentos PDF</h3>
                            <div class="file-upload-area clickable-area" id="pdf-drop-zone">
                                <div class="upload-icon">üìÅ</div>
                                <div class="upload-text">
                                    <p>Seleccionar carpeta</p>
                                    <small>Carpeta con archivos PDF</small>
                                </div>
                            </div>
                        </div>

                        <!-- Archivos Excel/CSV -->
                        <div class="upload-column">
                            <h3>Archivos Excel/CSV</h3>
                            <div class="file-upload-area clickable-area" id="excel-drop-zone">
                                <div class="upload-icon">üìä</div>
                                <div class="upload-text">
                                    <p>Seleccionar archivos</p>
                                    <small>Archivos .xlsx o .csv</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lista de archivos seleccionados separada -->
                <div class="selected-files-section">
                    <div class="files-row">
                        <!-- PDFs Seleccionados -->
                        <div class="files-column">
                            <h3>PDFs Seleccionados</h3>
                            <div class="files-list" id="pdf-files-list">
                                <div class="empty-state">No se han seleccionado documentos PDF</div>
                            </div>
                        </div>

                        <!-- Excel/CSV Seleccionados -->
                        <div class="files-column">
                            <h3>Excel/CSV Seleccionados</h3>
                            <div class="files-list" id="excel-files-list">
                                <div class="empty-state">No se han seleccionado archivos Excel/CSV</div>
                            </div>
                            
                            <!-- Selector de columnas -->
                            <div class="column-selector-section" id="column-selector" style="display: none;">
                                <h4>Columnas a Anonimizar</h4>
                                <p class="column-help">Selecciona las columnas que contienen informaci√≥n sensible</p>
                                <div class="columns-grid" id="columns-grid">
                                    <!-- Las columnas se cargar√°n din√°micamente -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de acci√≥n -->
                <div class="actions-section">
                    <button class="secondary-button" id="clear-files-btn">Limpiar Lista</button>
                </div>
            </section>

            <!-- Pesta√±a: Configurar -->
            <section id="config-tab" class="tab-pane">
                <div class="tab-navigation-buttons">
                    <button class="nav-button" id="config-prev-btn">‚Üê Anterior</button>
                    <button class="nav-button" id="config-next-btn">Siguiente ‚Üí</button>
                </div>
                <div class="tab-header">
                    <h2>Configuraci√≥n de Mapeo</h2>
                    <p>Gestiona las reglas de anonimizaci√≥n para contrapartes</p>
                </div>

                <!-- Tabla de configuraci√≥n con controles -->
                <div class="config-preview-section">
                    <div class="config-header">
                        <div class="config-status" id="config-status">
                            <span class="status-indicator warning"></span>
                            <span>Sin configuraci√≥n (sesi√≥n segura)</span>
                        </div>
                        <div class="config-controls">
                            <button class="secondary-button" id="upload-config-btn" title="Subir archivo Excel">‚¨ÜÔ∏è Subir</button>
                            <input type="file" id="config-file-input" accept=".xlsx,.csv" style="display: none;">
                        </div>
                    </div>
                    <div class="config-table-container">
                        <table class="config-table" id="config-preview-table">
                            <thead>
                                <tr>
                                    <th>Nombre Legal Completo</th>
                                    <th>Abreviaturas</th>
                                    <th>RUT</th>
                                    <th>LEI</th>
                                    <th>Direcci√≥n</th>
                                    <th>Pseud√≥nimo</th>
                                </tr>
                            </thead>
                            <tbody id="config-table-body">
                                <tr class="empty-state">
                                    <td colspan="6">No se ha cargado la configuraci√≥n</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </section>

            <!-- Pesta√±a: Resultados -->
            <section id="results-tab" class="tab-pane">
                <div class="tab-navigation-buttons">
                    <button class="nav-button" id="results-prev-btn">‚Üê Anterior</button>
                    <button class="nav-button" id="results-next-btn" disabled>Siguiente ‚Üí</button>
                </div>
                <div class="tab-header">
                    <h2>Procesamiento y Resultados</h2>
                    <p>Procesa los archivos y revisa los resultados</p>
                </div>

                <!-- Panel de procesamiento -->
                <div class="processing-section">
                    <div class="process-card">
                        <h3>Configuraci√≥n de Salida</h3>
                        <div class="output-options">
                            <div class="form-group">
                                <label>Carpeta de destino:</label>
                                <div class="folder-selector">
                                    <input type="text" id="output-folder" readonly placeholder="Seleccionar carpeta...">
                                    <button class="secondary-button" id="select-output-btn">Examinar</button>
                                </div>
                            </div>
                        </div>
                        <div class="process-actions">
                            <button class="gradient-button" id="start-process-btn">Iniciar Anonimizaci√≥n</button>
                        </div>
                    </div>
                </div>

                <!-- Panel de progreso -->
                <div class="progress-section" id="progress-section" style="display: none;">
                    <div class="progress-card">
                        <h3>Progreso del Procesamiento</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-status" id="progress-status">Preparando...</div>
                        <div class="progress-details" id="progress-details"></div>
                    </div>
                </div>

                <!-- Panel de resultados -->
                <div class="results-section" id="results-section" style="display: none;">
                    <h3>Resultados del Procesamiento</h3>
                    <div class="results-summary" id="results-summary">
                        <!-- Resumen din√°mico -->
                    </div>
                    <div class="results-list" id="results-list">
                        <!-- Lista detallada de resultados -->
                    </div>
                </div>

                <!-- Botones de acci√≥n -->
                <div class="actions-section">
                    <button class="secondary-button" id="process-again-btn" style="display: none;">Procesar Otros Archivos</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Scripts -->
    <script src="renderer.js"></script>
</body>
</html>